## Exercise 2-41
### Question

Consider the following code fragment:

```sql
for i=1 to n/2 do
    for j=i to n-i do
        for k=1 to j do
            output ‘‘foobar’’
```

Assume $n$ is even. Let $T(n)$ denote the number of times “foobar” is printed as
a function of $n$.  
(a) Express $T(n)$ as three nested summations.  
(b) Simplify the summation. Show your work.


### Solution

#### (a)

$$
\begin{equation}
    T(n)=\sum_{i=1}^\frac{n}{2}\sum_{j=i}^{n-i}\sum_{k=1}^j1
\end{equation}
$$

#### (b)


$$
\begin{align}
    T(n)&=\sum_{i=1}^\frac{n}{2}\sum_{j=i}^{n-i}\sum_{k=1}^j1\\
    &=\sum_{i=1}^\frac{n}{2}\sum_{j=i}^{n-i}j
\end{align}
$$

Here, we use a new variable $j'$:

$$
\begin{equation}
    j'=j-i
\end{equation}
$$

Rethink the expansion of $T(n)$.


$$
\begin{align}
    T(n)&=\sum_{i=1}^\frac{n}{2}\sum_{j=i}^{n-i}j \\
    &=\sum_{i=1}^\frac{n}{2}\sum_{j'=0}^{n-2i}j'\\
    &=\sum_{i=1}^\frac{n}{2}(i+(n-2i)i+\frac{1}{2}(n-2i)(n-2i+1))\\
    &=\frac{n^3}{8} \quad\text{(the answer)}
\end{align}
$$